/*!
 * jRaiser 2 Javascript Library
 * fixedlayer - v1.0.0 (2013-01-09T10:26:48+0800)
 * http://jraiser.org/ | Released under MIT license
 */
define("fixedlayer/1.0.x/",["base/1.0.x/","underscore/1.4.x/","widget/1.0.x/","dom/1.0.x/"],function(e,t,n){"use strict";var r=e("base/1.0.x/"),i=e("underscore/1.4.x/"),s=e("widget/1.0.x/"),o=e("dom/1.0.x/"),u=o(window),a=!0;return o(function(){var e=document.body,t=document.createElement("div");t.style.position="absolute",t.style.top="-5px",t.innerHTML='<div style="position: fixed; top: -10px;"></div>',e.appendChild(t),a=t.firstChild.offsetTop===-10,e.removeChild(t),t=null}),s.create(function(e){var t=r.extend({},e.position),n=e.wrapper.get(0);["top","bottom","left","right"].forEach(function(e){if(!t[e]){var r=n.style[e];r&&(t[e]=parseFloat(r))}}),e.position=t},{_init:function(e){var t=this,n=e.wrapper,s=/^center$/i;t._originalPosition=n.css("position");if(a&&e.useFixed){n.css("position","fixed");var o;r.each(e.position,function(e,t){s.test(e)?o=!0:n.css(t,e)}),o&&(t.computePosition=t.computePosition||function(){var t=e.position,r=document.documentElement,i={};if(s.test(t.top)||s.test(t.bottom))i.top=(r.clientHeight-n.outerHeight(!0))/2;if(s.test(t.left)||s.test(t.right))i.left=(r.clientWidth-n.outerWidth(!0))/2;return i})}else{n.css("position","absolute");var f=n.offsetParent(),l=f.offset();f.prop("tagName")==="BODY"&&(l.top-=parseFloat(f.css("marginTop")),l.left-=parseFloat(f.css("marginLeft"))),t.computePosition=t.computePosition||function(){var t=document.documentElement,r=document.body,i=e.position,o=t.scrollTop||r.scrollTop||0,u=t.scrollLeft||r.scrollLeft||0;return s.test(i.top)||s.test(i.bottom)?o+=(t.clientHeight-n.outerHeight(!0))/2:i.top!=null?o+=i.top:i.bottom!=null&&(o+=t.clientHeight-i.bottom-n.outerHeight(!0)),s.test(i.left)||s.test(i.right)?u+=(t.clientWidth-n.outerWidth(!0))/2:i.left!=null?u+=i.left:i.right!=null&&(u+=t.clientWidth-i.right-n.outerWidth(!0)),n.css({right:"auto",bottom:"auto"}),{top:o-l.top,left:u-l.left}}}if(t.computePosition){switch(e.effect){case"move":t.moveToPosition=i.throttle(function(){n.animate(t.computePosition(),{duration:e.duration,callback:function(){t._inited||delete t.computePosition}})},e.redrawDelay);break;case"none":t.moveToPosition=function(){n.css(t.computePosition())};break;default:throw new Error("effect("+e.effect+") is invalid")}t.moveToPosition(),(!a||!e.useFixed)&&u.on("scroll",t.moveToPosition),u.on("resize",t.moveToPosition)}},_destroy:function(e){var t=this;e.wrapper.css("position",t._originalPosition),delete t._originalPosition,t.moveToPosition&&(u.off("scroll",t.moveToPosition),u.off("resize",t.moveToPosition),e.effect==="none"&&delete t.computePosition,delete t.moveToPosition)},reposition:function(){var e=this,t=e._options.wrapper,n={};["Top","Left"].forEach(function(e,r){var i=t.css(e.toLowerCase());i&&(n[e.toLowerCase()]=parseFloat(i)-u["scroll"+e]())}),e.options({position:n})}},{effect:"move",redrawDelay:80,useFixed:!0})})